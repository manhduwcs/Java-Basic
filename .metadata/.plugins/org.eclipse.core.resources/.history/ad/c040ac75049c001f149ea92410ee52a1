package ohmygod;

import java.util.ArrayList;

public class LibraryMember {
    private String memberName;
    private ArrayList<LibraryItem> borrowedItems;

    public LibraryMember(String memberName) {
	this.memberName = memberName;
	borrowedItems = new ArrayList<>();
    }

    public String getMemberName() {
	return this.memberName;
    }

    public void showBorrowedItems() {
	if (borrowedItems == null) {
	    System.out.println("Thanh vien " + this.memberName + " chua muon cuon sach nao.");
	    return;
	}
	System.out.println("-----------------------------------------------");
	System.out.println("Danh sach sach da muon cua thanh vien " + this.memberName);
	for (LibraryItem item : borrowedItems) {
	    if (item instanceof Book) {
		Book book = (Book) item;
		System.out.println("\tTen sach : " + book.getTitle());
		System.out.println("\tTrang thai " +(book.isAvailable()==true?"Da muon":"Co san"));
	    }
	}
	System.out.println("-----------------------------------------------");
    }

    public void borrowItem(LibraryItem item) {
	if (item instanceof Book) {
	    Book book = (Book) item;
	    if (book.isAvailable() == false) {
		return;
	    } else {
		book.borrowItem();
		borrowedItems.add(book);
	    }
	}
    }

    public void returnItem(LibraryItem item) {
	if (borrowedItems == null) {
	    System.out.println("Loi : Thanh vien " + this.memberName + " chua muon cuon sach nao !");
	    return;
	}
	if (item instanceof Book) {
	    Book book = (Book) item;
	    if (book.isAvailable() == false) {
		book.returnItem();
		borrowedItems.remove(book);
	    }
	}
	return;
    }
}
